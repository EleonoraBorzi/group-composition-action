
name: Test A
    
on:
    [push, pull_request]
    
jobs:
    extractPayloadData:
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2
            - uses: Dovyski/payload-info-action@master
              with:
                filter_push: '.commits[].author'
                filter_pull_request: '.pull_request.commits'
            - id: saveJson
              run: |
                githubjson=`cat $GITHUB_EVENT_PATH`
                echo $githubjson
                number=`echo $(jq -r 'after' <<< "$githubjson")`
  
            # content= cat gh-payload.json
         #    content="${content//'%'/'%25'}"
         #        content="${content//$'\n'/'%0A'}"
         #        content="${content//$'\r'/'%0D'}"
         #        echo "::set-output name=packageJson::$content"
           # - name: get Variables 
            #  run: echo "${{fromJson(steps.saveJson.outputs.packageJson).after}}"
            - name: get version
              id: headBranch
              uses: notiz-dev/github-action-json-property@release
              with: 
               path: 'gh-payload.json'
               prop_path: 'auto_merge'
            - run: |
                    echo ${{steps.headBranch.outputs.prop}}
  
        
        
        
            
    
            #  key: ${{ secrets.key }} # if run.py requires passwords..etc, set it as secrets
          #- name: export index
          #  .... # use crosponding script or actions to help export.
         # echo test, and deploy your project.
