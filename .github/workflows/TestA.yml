
name: Test A
    
on:
    [push, pull_request]
    
jobs:
    extractPayloadData:
        runs-on: ubuntu-latest
        env:
            ID: ${{ github.event.comment.id }}
            test: japp
        outputs:
            # pull_request: base|head: repo: full_name
            headRepo: ${{ steps.extract.outputs.headRepo }}
            baseRepo: ${{ steps.extract.outputs.baseRepo }}
            # pull_request: base|head: ref|sha
            headRef: ${{ steps.extract.outputs.headRef }}
            baseRef: ${{ steps.extract.outputs.baseRef }}
            # pull_request: number:
            num: ${{ steps.extract.outputs.num }}
            fileChanges: ${{steps.file_changes.outputs.files}}
        steps:
            - uses: actions/checkout@v2
            - uses: Dovyski/payload-info-action@master
              with:
                filter_push: '.commits[].author'
                filter_pull_request: '.pull_request.commits'
            - id: set_var
              run: |
                 content= cat gh-payload.json
                 content="${content//'%'/'%25'}
                 content="${content//$'\n'/'%0A'}"
                 content="${content//$'\r'/'%0D'}"
                 echo "${{fromJson($content).after}}
            - name: get version
              id: headBranch
              uses: notiz-dev/github-action-json-property@release
              with: 
               path: 'gh-payload.json'
               prop_path: 'auto_merge'
            - run: |
                    echo ${{steps.headBranch.outputs.prop}}
  
        
        
        
            
    
            #  key: ${{ secrets.key }} # if run.py requires passwords..etc, set it as secrets
          #- name: export index
          #  .... # use crosponding script or actions to help export.
         # echo test, and deploy your project.
